<div class="absolute bottom-3 right-3 z-20 h-[75vh] w-[25rem] text-white flex flex-col panel-surface border border-white/20 rounded-xl shadow-lg overflow-hidden">
  <div class="flex">
    <button type="button"
      class="flex-1 px-4 py-2 text-sm font-medium transition-colors"
      [ngClass]="{
        'bg-amber-500 text-black': activeTab === 'info',
        'bg-transparent hover:bg-white/10': activeTab !== 'info'
      }"
      (click)="setActiveTab('info')">
      Info
    </button>
    <a
      class="flex-1 px-4 py-2 text-sm font-medium text-center transition-colors"
      [ngClass]="{
        'bg-amber-500 text-black': activeTab === 'charts',
        'bg-transparent hover:bg-white/10': activeTab !== 'charts'
      }"
      (click)="setActiveTab('charts')">
      Charts
    </a>
  </div>

  <div class="px-4 py-3 border-t border-white/20">
    <h2 class="text-lg font-semibold">{{ tle?.name }}</h2>
  </div>

  <div class="flex-1 overflow-auto p-4" *ngIf="activeTab === 'info'">
    <p-accordion [value]="['info','location','orbit','tle','other']" [multiple]="true">

      <p-accordion-panel value="info">
        <p-accordion-header>Info</p-accordion-header>
        <p-accordion-content>
          <p-table [value]="infoData" [tableStyle]="{ 'min-width': '100%' }" class="text-white bg-gray-900">
            <ng-template pTemplate="body" let-element>
              <tr class="hover:bg-gray-800 text-sm">
                <td class="text-amber-400">{{ element.name }}</td>
                <td>{{ element.value }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-accordion-content>
      </p-accordion-panel>

      <p-accordion-panel value="orbit">
        <p-accordion-header>Orbital Elements</p-accordion-header>
        <p-accordion-content>
          <p-table [value]="orbitData" [tableStyle]="{ 'min-width': '100%' }" class="text-white bg-gray-900">
            <ng-template pTemplate="body" let-element>
              <tr class="hover:bg-gray-800 text-sm">
                <td class="text-amber-400">{{ element.name }}</td>
                <td>{{ element.value }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-accordion-content>
      </p-accordion-panel>

      <p-accordion-panel value="location">
        <p-accordion-header>Location</p-accordion-header>
        <p-accordion-content>
          <p-table [value]="locationData" [tableStyle]="{ 'min-width': '100%' }" class="text-white bg-gray-900">
            <ng-template pTemplate="body" let-element>
              <tr class="hover:bg-gray-800 text-sm">
                <td class="text-amber-400">{{ element.name }}</td>
                <td>{{ element.value }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-accordion-content>
      </p-accordion-panel>

      <p-accordion-panel value="tle">
        <p-accordion-header>TLE</p-accordion-header>
        <p-accordion-content>
          <p-table [value]="tleData" [tableStyle]="{ 'min-width': '100%' }" class="text-white bg-gray-900">
            <ng-template pTemplate="body" let-element>
              <tr class="hover:bg-gray-800 text-sm">
                <td class="text-amber-400">{{ element.name }}</td>
                <td *ngIf="element.name !== 'TLE'">{{ element.value }}</td>
                <td *ngIf="element.name === 'TLE'">
                  <textarea rows="3" cols="75" pTextarea [(ngModel)]="element.value" [readonly]="true"
                    pSize="small" style="resize: none" class="h-full overflow-x-auto text-xs"></textarea>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </p-accordion-content>
      </p-accordion-panel>

      <p-accordion-panel value="other">
        <p-accordion-header>Other</p-accordion-header>
        <p-accordion-content>
          <p-table [value]="otherData" [tableStyle]="{ 'min-width': '100%' }" class="text-white bg-gray-900">
            <ng-template pTemplate="body" let-element>
              <tr class="hover:bg-gray-800">
                <td class="text-amber-400">{{ element.name }}</td>
                <td>{{ element.value }}</td>
              </tr>
            </ng-template>
          </p-table>
        </p-accordion-content>
      </p-accordion-panel>

    </p-accordion>
  </div>

  <div class="flex-1 p-4" *ngIf="activeTab === 'charts'">
    <div class="w-full h-full bg-black/20 rounded-lg border border-white/10 p-3">
      <canvas #velocityChart class="w-full h-full"></canvas>
    </div>
  </div>
</div>
